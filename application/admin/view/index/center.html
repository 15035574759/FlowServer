{include file="public/header"}
<style type="text/css">
    	.content{width: 100%;height: auto;margin-top:20px;}
    	.top{width: 98%;height: 80px;overflow: hidden;margin-left:1% ;}
    	.box{width: 24%; height:80px;float: left;background:#d7d7d6;border-radius:10px; overflow: hidden;}
    	.box1,.box2,.box3{margin-right: 10px;}
    	.box1{margin-left: 1%;background-image:url(/javascript/flow_tj/img/1.jpg);background-size:100% 100%;}
		  .box2{background-image:url(/javascript/flow_tj/img/2.jpg);background-size:100% 100%;}
    	.box3{background-image:url(/javascript/flow_tj/img/3.jpg);background-size:100% 100%;}
    	.box4{background-image:url(/javascript/flow_tj/img/4.jpg);background-size:100% 100%;}
    	.box-text{width:100px; height:80px;text-align: center;margin-top: 18px;margin-left: 220px;line-height: 20px;}
    	#map{
    		margin: auto;
    	}
    	#main,#along{
    		margin: auto;
    	}
    	.jvectormap-label {
		    position: absolute;
		    display: none;
		    border: solid 1px #CDCDCD;
		    -moz-border-radius: 3px;
		    background: #292929;
		    color: white;
		    font-family: sans-serif, Verdana;
		    font-size: smaller;
		    padding: 3px;
		}
		/*放大缩小按钮样式*/
		.jvectormap-zoomin, .jvectormap-zoomout {
		    position: absolute;-moz-border-radius: 3px;background: #292929;padding: 3px;color: white; width: 10px;height: 10px;cursor: pointer;
    		line-height: 10px;text-align: center;}
		.jvectormap-zoomin { left: 10px; top: 10px;}
		.jvectormap-zoomout {  left: 10px;top: 30px;}
    .styday{font-size: 18px;font-weight: bold;color: #383838;margin-left:20px;margin-bottom: 10px;}
</style>
<div class="content">
  <blockquote class="layui-elem-quote fhui-admin-main_hd" style="margin-left:10px;">
      <h2>访问统计</h2>
  </blockquote>
      <h2 class="styday">今日访问数据统计</h2>
			<div class="top">
				<div class="box1 box">
					<div class="box-text">
						<p>{$TodayData['page_num']}</p>
						<p>访问量</p>
					</div>
				</div>
				<div class="box2 box">
					<div class="box-text">
						<p>{$TodayData['user_num']}</p>
						<span>新增用户</span>
					</div>

				</div>
				<div class="box3 box">
					<div class="box-text">
						<p>{$TodayData['activity_num']}</p>
						<span>最新活动</span>
					</div>
				</div>
				<div class="box4 box">
					<div class="box-text">
						<p>{$TodayData['leave_num']}</p>
						<span>最新留言</span>
					</div>
				</div>
			</div>
			<!--柱状表格-->
			<div id="main" style="width:80%; height:600px; margin-top: 10px;"></div>

      <!-- 折线图 -->
      <div id="along" style="width:90%; height:1000px; margin-top: 10px;margin-bottom:-500px;"></div>

			<!--地图-->
			<div id="map" style="width:800px;height: 500px;"></div>

      <blockquote class="layui-elem-quote fhui-admin-main_hd" style="margin-left:10px;">
          <h2>系统配置</h2>
      </blockquote>
      <div class="main-wrap">
          <blockquote class="layui-elem-quote">
              <p>本后台管理基于LayUI开发 ,支持所有LayUI组件.</p>
              <p>LayUI文档地址：<a href="http://www.layui.com/doc" target="_blank">http://www.layui.com/doc</a> </p>
              <p>LayUI演示地址：<a href="http://www.layui.com/demo" target="_blank">http://www.layui.com/demo</a></p>
              <p>管理员博客地址：<a href="http://www.qinlinhui.cn" target="_blank">http://www.qinlinhui.cn</a></p>
          </blockquote>
          <blockquote class="layui-elem-quote fhuaui-tip">看世间纷纷扰扰，唯我独清；问世间繁繁华华，愿君共明 </blockquote>
          <blockquote class="layui-elem-quote fhuaui-tip">命里有时终须有，命里无时莫强求</blockquote>
          <fieldset class="layui-elem-field">
              <legend>更新日志</legend>
              <div class="layui-field-box">
                  <div class="admin-log-list clearfix">
                      <div class="admin-log-span admin-log-avatar">
                          <a class="avatar">
                              <img avatar src="http://q.qlogo.cn/qqapp/101235792/3DC0A1C44E35263F3C44E95D0BEBF7DD/100" />
                          </a>
                      </div>
                      <div class="admin-log-span admin-log-title">
                          <h2>FlowAdmin后台管理系统</h2>
                          <p>全新视觉，简约界面乐享体验<span>|</span><a class="logck" href="javascript:;">V5.0.0 (点我查看功能)</a></p>
                          <div class="admin-log-content">
                              <h2>功能介绍</h2>
                              <p>1.项目管理</p>
                              <p>2.活动管理</p>
                              <p>3.广告设置</p>
                              <p>4.日志管理</p>
                              <p>5.数据库管理</p>
                              <p>6.系统管理,一套比较适用的权限管理系统</p>
                              <p>7.添加主页面数据访问量统计</p>
                          </div>
                      </div>
                      <div class="admin-log-span admin-log-date">
                          <p>2017-11-27 更新</p>
                      </div>
                  </div>
              </div>
          </fieldset>
      </div>
</div>
{include file="public/footer"}
<script src="/javascript/flow_tj/js/jquery-1.8.3.min.js" type="text/javascript"></script>
<script src="/javascript/flow_tj/js/echarts.min.js" type="text/javascript" charset="utf-8"></script>
<script src="/javascript/flow_tj/js/highmaps.js" type="text/javascript"></script>
<script src="/javascript/flow_tj/js/china.js" type="text/javascript" charset="utf-8"></script>
<script>setTimeout("location=location; ", 60000); </script>
<script src="__js__/log.js"></script>
<script type="text/javascript">
$(function(){
	 var myChart = echarts.init(document.getElementById('main'));
   const newData = JSON.parse('{$ThisMonth}');
  //  console.log('{$ThisMonth}',"55555");
   let thisMonth = new Array(); //本月日期
   let thisMonthData = new Array(); //本月数据
  //  var newData = JSON.parse(data);
   for (var i = 0; i < newData.length; i++) {
     $(this).each(function() {
          thisMonth.push(newData[i].time_up);
     })

     $(this).each(function() {
          thisMonthData.push(newData[i].page_num);
     })
   }

	   //柱状图
		var option = {
		 	title:{
		 		text:'本月访问量'
		 	},
		    color: ['#1AA094'],
		    tooltip : {
		        trigger: 'axis',
		        axisPointer : {            // 坐标轴指示器，坐标轴触发有效
		            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
		        }
		    },
		    grid: {
		        left: '3%',
		        right: '4%',
		        bottom: '3%',
		        containLabel: true
		    },
		    xAxis : [
		        {
		            type : 'category',
		            data : thisMonth,
		            axisTick: {
		                alignWithLabel: true
		            }
		        }
		    ],
		    yAxis : [
		        {
		            type : 'value'
		        }
		    ],
		    series : [
		        {
		            name:'访问量',
		            type:'bar',
		            barWidth:'80%',
                label: {
                   normal: {
                       show: true,
                       position: 'inside'
                   }
               },
		           data: thisMonthData
		        }
		    ]
		};
		myChart.setOption(option);

    // 折线图
    var myChart = echarts.init(document.getElementById('along'));
    option = {
      tooltip: {
          trigger: 'axis'
        },
      xAxis: [{
        type: 'category',
        boundaryGap: false,
        data: thisMonth
      }],
      yAxis: [{
          splitLine: {show: true}
      }],
      grid: [{
          bottom: '60%'
      }],
      series: [{
        name:'访问量',
        data: thisMonthData,
        type: 'line',
        areaStyle: {}
      }]
    };
  // 使用刚指定的配置项和数据显示图表。
  myChart.setOption(option);

	   //地图
	   // 随机数据
		var data = [{"name":"北京","value":80},{"name":"天津","value":25},{"name":"河北","value":91},{"name":"山西","value":77},{"name":"内蒙古","value":100},{"name":"辽宁","value":11},{"name":"吉林","value":39},{"name":"黑龙江","value":3},{"name":"上海","value":19},{"name":"江苏","value":95},{"name":"浙江","value":2},{"name":"安徽","value":54},{"name":"福建","value":77},{"name":"江西","value":90},{"name":"山东","value":26},{"name":"河南","value":79},{"name":"湖北","value":9},{"name":"湖南","value":81},{"name":"广东","value":90},{"name":"广西","value":46},{"name":"海南","value":99},{"name":"重庆","value":11},{"name":"四川","value":14},{"name":"贵州","value":78},{"name":"云南","value":78},{"name":"西藏","value":27},{"name":"陕西","value":10},{"name":"甘肃","value":96},{"name":"青海","value":27},{"name":"宁夏","value":64},{"name":"新疆","value":10},{"name":"台湾","value":59},{"name":"香港","value":85},{"name":"澳门","value":39},{"name":"南海诸岛","value":46},{"name":"南海诸岛","value":22}];
		// 初始化图表
		var map = new Highcharts.Map('map', {
		  title: {
		    text: '访问地图'
		  },
		  colorAxis: {
		    min: 0,
		    minColor: 'rgb(255,255,255)',
		    maxColor: '#006cee'
		  },
		  series: [{
		    data: data,
		    name: '随机数据',
		    mapData: Highcharts.maps['cn/china'],
		    joinBy: 'name' // 根据 name 属性进行关联
		  }]
		});
})

</script>
